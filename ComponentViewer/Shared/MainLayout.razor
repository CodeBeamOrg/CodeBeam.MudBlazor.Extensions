@inherits LayoutComponentBase

<style>
    @($"@import url('https://fonts.googleapis.com/css2?family={font?.Replace(" ", "+")}')")
</style>

<MudLayout>
    <MudAppBar Class="appbar-style">
        <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="4">
            <MudIconButton Class="reverse-color" Icon="@Icons.Custom.Brands.MudBlazor" Size="Size.Large" Href="https://mudblazor.com/" Target="_blank" />
            <MudText>CodeBeam MudExtensions</MudText>
        </MudStack>
    </MudAppBar>
    <MudMainContent>
        <div class="pa-4">
            <MudFontPicker @ref="@_fontPicker" Label="Font Picker" FontChanged="FontChanged" Variant="Variant.Outlined" Margin="Margin.Dense" Dense="true" />
        </div>
        @Body
    </MudMainContent>
</MudLayout>

<style>
    .appbar-style {
        background: var(--mud-palette-secondary) !important;
        transition: background-color .6s;
    }
    
    .appbar-style:hover {
        background: linear-gradient(to right, var(--mud-palette-primary) , var(--mud-palette-secondary)) !important;
    }

    .appbar-style .reverse-color {
        color: var(--mud-palette-primary) !important;
        transition: background-color .6s;
    }

        .appbar-style:hover .reverse-color {
            color: var(--mud-palette-secondary) !important;
        }
</style>


<MudThemeProvider Theme="_theme" />
<MudDialogProvider />
<MudSnackbarProvider />


@code {
    MudFontPicker _fontPicker;
    string font = null;
    bool open = false;

    MudTheme _theme = new MudTheme()
        {
            LayoutProperties = new LayoutProperties()
            {
                DefaultBorderRadius = "20px"
            },
        };

    private void FontChanged()
    {
        font = _fontPicker?.Font;

        if (font != null)
        {
            _theme = new MudTheme()
                {
                    LayoutProperties = new LayoutProperties()
                    {
                        DefaultBorderRadius = "20px"
                    },

                    Typography = new Typography()
                    {
                        Default = new Default()
                        {
                            FontFamily = new[] { font, "Roboto", "Poppins", "Helvetica", "sans-serif" }
                        },
                    }
                };
        }


        StateHasChanged();
    }
}
