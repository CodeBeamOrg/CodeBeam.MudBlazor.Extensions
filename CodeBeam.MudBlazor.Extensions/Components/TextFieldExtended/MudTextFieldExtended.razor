@namespace MudExtensions
@typeparam T
@inherits MudDebouncedInputExtended<T>

<CascadingValue Name="SubscribeToParentForm2" Value="@SubscribeToParentForm2" IsFixed="true">
        <MudInputControl Label="@Label"
                         Variant="@Variant"
                         HelperText="@HelperText"
                         HelperTextOnFocus="@HelperTextOnFocus"
                         CounterText="@GetCounterText()"
                         FullWidth="@FullWidth"
                         Class="@Classname"
                         Error="@HasErrors"
                         ErrorText="@GetErrorText()"
                         ErrorId="@ErrorId"
                         Disabled="@Disabled"
                         Margin="@Margin"
                         Required="@Required"
                         ForId="@FieldId">
            <InputContent>
                <CascadingValue Name="SubscribeToParentForm2" Value="false" IsFixed="true">
                    @if (_mask == null)
                    {
                        <MudInputExtended T="string"
                                      @ref="InputReference"
                                      @attributes="UserAttributes"
                                      InputType="@InputType"
                                      Lines="@Lines"
                                      Style="@Style"
                                      Variant="@Variant"
                                      TextUpdateSuppression="@TextUpdateSuppression"
                                      Value="@Text"
                                      ValueChanged="(s) => SetTextAsync(s)"
                                      Placeholder="@Placeholder"
                                      Disabled=@Disabled
                                      DisableUnderLine="@DisableUnderLine"
                                      ReadOnly="@ReadOnly"
                                      MaxLength="@MaxLength"
                                      IconSize="@IconSize"
                                      Error="@Error"
                                      ErrorId="@ErrorId"
                                      Immediate="@Immediate"
                                      Margin="@Margin"
                                      OnBlur="@OnBlurredAsync"
                                      OnKeyDown="@InvokeKeyDown"
                                      OnInternalInputChanged="OnChange"
                                      OnKeyPress="@InvokeKeyPress"
                                      OnKeyUp="@InvokeKeyUp"
                                      KeyDownPreventDefault="KeyDownPreventDefault"
                                      KeyPressPreventDefault="KeyPressPreventDefault"
                                      KeyUpPreventDefault="KeyUpPreventDefault"
                                      HideSpinButtons="true"
                                      Clearable="@Clearable"
                                      OnClearButtonClick="@OnClearButtonClick"
                                      Pattern="@Pattern"
                                      AdornmentStart="@AdornmentStart"
                                      AdornmentEnd="@AdornmentEnd"
                                      AutoSize="AutoSize"
                                      ForceShrink="@ForceShrink"
                                      ShowVisualiser="@(DataVisualiser != null && ShowVisualiser)"
                                      DataVisualiserStyle="@(DataVisualiser != null ? "min-height: 1.1876em" : null)">
                                    <DataVisualiser>
                                        @DataVisualiser
                                    </DataVisualiser>

                                  </MudInputExtended>
                    }
                    else
                    {
                        <MudMask @ref="_maskReference"
                             @attributes="UserAttributes"
                             Mask="@_mask"
                             InputType="@InputType"
                             Lines="@Lines"
                             Style="@Style"
                             Variant="@Variant"
                             TextUpdateSuppression="@TextUpdateSuppression"
                             Value="@Text"
                             ValueChanged="OnMaskedValueChanged"
                             Placeholder="@Placeholder"
                             Disabled=@Disabled
                             DisableUnderLine="@DisableUnderLine"
                             ReadOnly="@ReadOnly"
                             MaxLength="@MaxLength"
                             IconSize="@IconSize"
                             Error="@Error"
                             Immediate="@Immediate"
                             Margin="@Margin" OnBlur="@OnBlurredAsync"
                             Clearable="@Clearable"
                             OnClearButtonClick="@OnClearButtonClick"
                             AdornmentStart="@AdornmentStart"
                             AdornmentEnd="@AdornmentEnd" />
                    }
                </CascadingValue>
            </InputContent>
    </MudInputControl>
</CascadingValue>