@inject ISnackbar Snackbar
@using MudBlazor.Extensions
@using MudExtensions.Utilities

<MudGrid Class="cursor-default">
    <MudCsvMapper @ref="csvMapper" MudFieldHeaders="PartnerFields" OnUpload="Upload"></MudCsvMapper>
</MudGrid>

@code {
    MudCsvMapper csvMapper;

    List<MudFieldHeader> PartnerFields = new() {
        new MudFieldHeader("Email", true),
        new MudFieldHeader("First Name"),
        new MudFieldHeader("Last Name"),
        new MudFieldHeader("Phone"),
    };

    private async Task<bool> Upload()
    {
        var file = csvMapper.CsvFile; //IBrowserFile / .csv that was uploaded
        byte[] FileContent = csvMapper.FileContentByte; // file with headers updated to correct names

        Snackbar.Add($"CSV Mapped!", Severity.Info);
        return true;
        //Send renamed headers with CSV file to MudTable or Database to be parsed
    }
}
